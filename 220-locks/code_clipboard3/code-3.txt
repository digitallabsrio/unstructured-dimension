int rc = pthread_mutex_init(&lock, NULL);
assert(rc == 0); // always check success!